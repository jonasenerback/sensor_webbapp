
{% extends "base.html" %}

{% block content %}
<head>
   <meta charset="utf-8" />
   <script src='static/moment-with-locales.js'></script>
   <script src='static/Chart.min.js'></script>
</head>
<body>
<div class="container">
  <div class="jumbotron">
        <h1 align="center">Temperature Chart </h1>
  </div>
  <canvas id="line-chart-all" ></canvas>
  <form method="post" action="/chart">
    <input type="submit" value="1 hours", name="time">
    <input type="submit" value="2 hours", name="time">
    <input type="submit" value="4 hours", name="time">
    <input type="submit" value="All", name="time">
  </form>

</div>
<script>
  <!-- set up data to template to match the chart.js input -->
  var balconyData = [];
  var kitchenData = [];
  var bedroomData = [];

  {% for balconyTemp in balconyValues %}
    balconyData.push({ x:moment("{{ balconyLabels[loop.index - 1] }}", "YYYY-MM-DD HH:mm:ss"), y : {{ balconyTemp  }} });
  {% endfor %}
  {% for kitchenTemp in kitchenValues %}
    kitchenData.push({ x:moment("{{ kitchenLabels[loop.index - 1] }}", "YYYY-MM-DD HH:mm:ss"), y : {{ kitchenTemp }} });
  {% endfor %}
  {% for bedroomTemp in bedroomValues %}
    bedroomData.push({ x:moment("{{ bedroomLabels[loop.index - 1] }}", "YYYY-MM-DD HH:mm:ss"), y : {{ bedroomTemp }} });
  {% endfor %}

  <!-- Set up the chart.js object -->
  Chart.defaults.global.elements.line.fill = false;
  Chart.defaults.global.animation.duration = 0;

  new Chart(document.getElementById("line-chart-all"), {
    type: 'scatter',
    data: {
    datasets : [{
          label: "Balcony",
          data: balconyData,
          borderColor: 'blue',
          showLine: true
        }, {
          label : "Kitchen",
          data : kitchenData,
          borderColor: 'red',
          showLine: true
        },{
          label: "bedroom",
          data : bedroomData,
          borderColor: 'green',
          showLine: true
        }]
    },
    options: {
      elements: {point: {radius: 0}},
      scales: {
        xAxes: [{
            type: 'time',
            time: {
                parser: "YYYYMMDD",
                unit: 'day',
                unitStepSize: 1
            }
        }]
      }
    }

  });
</script>
</body>

{% endblock %}
